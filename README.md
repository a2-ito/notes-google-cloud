# notes-google-cloud

## Compute Engine
- MIGの自動ロールアウト
  - a
  - maxSurge オプション
    - 自動更新中にMIGが ```targetSize``` を超えて作成できる新しいインスタンスの数を構成します
    - 例えば、```maxSurge```を5に設定すると、MIGは新しいインスタンステンプレートを使用して、ターゲットサイズを超える最大5つの新しいインスタンスを作成します。
  - maxUnavailable オプション
    - 自動更新中に常時利用できないインスタンスの数を設定する。
    - 例えば、```maxUnavailable``` を5に設定すると、更新の際、同時にオフラインになるのは5つのインスタンスのみとなる。
  - 例
    1. ターゲットサイズを超える新しいインスタンス数の作成 5個までとする。
    1. 最大3台のオフラインマシン、最小待機時間3分を指定してローリングアップデートを実行してから、新しいインスタンスをオンラインとしてマークする

    1. 


## Cloud Storage
- オブジェクトのライフサイクル管理
  - Cloud Storage では、オブジェクトの有効期限（TTL）の設定、非現行バージョンの保持、コスト管理を容易にするためのストレージクラス「ダウングレード」など、一般的なユースケースをサポートするため、オブジェクトのライフサイクル管理機能を提供しています。
- ライフサイクル管理のユースケース例
  - 365日以上経過したオブジェクトのストレージクラスを Coldline Storage にダウングレードする
  - 2013年1月1日より以前に作成されたオブジェクトを削除する。
  - バージョニングが有効になっているバケット内の各オブジェクトで、最新の3バージョンのみを維持する。

- Cloud Storage の「クライアント側の暗号化」を利用する。
  - これを利用すると、Cloud Storage に送信される前に暗号化処理が行われるため、転送時も保存時も暗号化された状態が保たれる。、

## Datastore

## Cloud SQL
- Cloud SQL は最大10TB
Cloud SQL インスタンスのリードレプリカを作成するには、インスタンスが次の要件を満たしている必要があります。
- バイナリロギングが有効になっていること。
- バイナリロギングを有効にした後に、少なくとも１つのバックアップが作成されていること。


## Dataproc
- Cloud Dataproc は、オープンソースのデータツールを利用してバッチ処理、クエリ実行、ストリーミング、機械学習を行えるマネージド Apache Spark / Apache Hadoop サービスです。
- オートスケールしない
- use cases
  - Data mining and analysis in datasets of known size
  - Migrate on-premises Hadoop jobs to the cloud

## Dataflow
- Cloud Dataflow は、データの信頼性と表現力を損なうことなく、ストリーム（リアルタイム）モードまたはバッチ（履歴）モードでデータを変換して拡充する、フルマネージド サービスです。このサービスを利用すれば、複雑な回避策を用意したり、妥協策を講じたりする必要はなくなります。さらに、サーバーレス アプローチによるリソースのプロビジョニングと管理により、実質無制限の容量を従量課金制で使用して、膨大な量のデータ処理の問題を解決することができます。

## BigQuery
- roles/bigquery.jobUser
  - プロジェクト内でジョブ（クエリを含む）を実行する権限を付与します。

## リソースの範囲

### Global Resource
 - イメージ
 - スナップショット
 - インスタンス テンプレート
 - VPC ネットワーク
 - ファイアウォール
 - ルート
 - グローバル オペレーション

### Region Resource
 - アドレス
 - サブネット
 - リージョンマネージドインスタンスグループ
 - リージョンオペレーション

### Zone Resource
 - インスタンス
 - ディスク
 - マシンタイプ
 - ゾーンマネージドインスタンスグループ
 - ゾーンオペレーション

### イメージとスナップショット
- どちらもグローバルリソース
- 価格はイメージの方が高い
- イメージはプロジェクト間で共有可能
- インスタンステンプレートとして指定可能なのは、イメージのみ

## App Engine
- Standard Environment と比較して Flexible Environment の利点
  - SSH可能
  - サードパーティバイナリのインストール
  - ローカルディスクへの書き込み

## Cloud Endpoint



